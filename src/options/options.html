<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MDView Settings</title>
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <div class="options-container">
      <header class="options-header">
        <h1>MDView Settings</h1>
        <p>Configure your markdown viewing experience</p>
      </header>

      <div class="options-content">
        <aside class="options-sidebar">
          <nav class="options-nav">
            <button class="nav-item active" data-section="appearance">Appearance</button>
            <button class="nav-item" data-section="diagrams">Diagrams</button>
            <button class="nav-item" data-section="performance">Performance</button>
            <button class="nav-item" data-section="export">Export</button>
            <button class="nav-item" data-section="advanced">Advanced</button>
          </nav>
        </aside>

        <main class="options-main">
          <!-- Appearance Section -->
          <section id="appearance" class="settings-section active">
            <h2>Appearance</h2>

            <div class="setting-group">
              <label for="theme" class="setting-label">Theme</label>
              <select id="theme" class="setting-input">
                <option value="github-light">GitHub Light</option>
                <option value="github-dark">GitHub Dark</option>
                <option value="catppuccin-latte">Catppuccin Latte</option>
                <option value="catppuccin-frappe">Catppuccin Frappé</option>
                <option value="catppuccin-macchiato">Catppuccin Macchiato</option>
                <option value="catppuccin-mocha">Catppuccin Mocha</option>
                <option value="monokai">Monokai</option>
                <option value="monokai-pro">Monokai Pro</option>
              </select>
            </div>

            <div class="setting-group">
              <label class="setting-label">
                <input type="checkbox" id="auto-theme" class="setting-checkbox" />
                Auto Dark Mode
              </label>
              <p class="setting-description">Automatically switch between light and dark themes based on system preference</p>
            </div>

            <div class="setting-group">
              <label for="light-theme" class="setting-label">Light Theme</label>
              <select id="light-theme" class="setting-input">
                <option value="github-light">GitHub Light</option>
                <option value="catppuccin-latte">Catppuccin Latte</option>
                <option value="catppuccin-frappe">Catppuccin Frappé</option>
              </select>
            </div>

            <div class="setting-group">
              <label for="dark-theme" class="setting-label">Dark Theme</label>
              <select id="dark-theme" class="setting-input">
                <option value="github-dark">GitHub Dark</option>
                <option value="catppuccin-macchiato">Catppuccin Macchiato</option>
                <option value="catppuccin-mocha">Catppuccin Mocha</option>
                <option value="monokai">Monokai</option>
                <option value="monokai-pro">Monokai Pro</option>
              </select>
            </div>

            <div class="setting-group">
              <label class="setting-label">
                <input type="checkbox" id="code-line-numbers" class="setting-checkbox" />
                Show Line Numbers in Code Blocks
              </label>
            </div>

            <div class="setting-group">
              <label class="setting-label">
                <input type="checkbox" id="enable-html" class="setting-checkbox" />
                Enable HTML Rendering
              </label>
              <p class="setting-description">Allow HTML tags within markdown files. Content is sanitized for security.</p>
            </div>

            <div class="setting-group">
              <label for="font-family" class="setting-label">Font Family (Standard)</label>
              <input type="text" id="font-family" class="setting-input" placeholder="Default: -apple-system, BlinkMacSystemFont, ..." />
              <p class="setting-description">Leave empty to use theme default</p>
            </div>

            <div class="setting-group">
              <label for="code-font-family" class="setting-label">Font Family (Code)</label>
              <input type="text" id="code-font-family" class="setting-input" placeholder="Default: ui-monospace, SFMono-Regular, ..." />
              <p class="setting-description">Leave empty to use theme default</p>
            </div>

            <div class="setting-group">
              <label for="line-height" class="setting-label">Line Height</label>
              <input type="number" id="line-height" class="setting-input" min="1.0" max="2.5" step="0.1" placeholder="Default: 1.5" />
              <p class="setting-description">Leave empty to use theme default</p>
            </div>

            <div class="setting-group">
              <label for="max-width" class="setting-label">Max Width (px)</label>
              <input type="number" id="max-width" class="setting-input" min="600" max="2000" step="20" placeholder="Default: 980" />
              <p class="setting-description">Leave empty to use theme default</p>
            </div>

            <h3 style="margin-top: 32px; margin-bottom: 16px; font-size: 18px;">Table of Contents</h3>

            <div class="setting-group">
              <label class="setting-label">
                <input type="checkbox" id="show-toc" class="setting-checkbox" />
                Show Table of Contents
              </label>
              <p class="setting-description">Display a floating table of contents overlay on the left side</p>
            </div>

            <div class="setting-group">
              <label for="toc-max-depth" class="setting-label">Max Heading Depth</label>
              <select id="toc-max-depth" class="setting-input">
                <option value="2">H1-H2</option>
                <option value="3">H1-H3</option>
                <option value="4">H1-H4</option>
                <option value="5">H1-H5</option>
                <option value="6">All Levels</option>
              </select>
              <p class="setting-description">Maximum heading level to display in table of contents</p>
            </div>

            <div class="setting-group">
              <label class="setting-label">
                <input type="checkbox" id="toc-auto-collapse" class="setting-checkbox" />
                Auto-collapse Sections
              </label>
              <p class="setting-description">Collapse nested sections by default for cleaner TOC</p>
            </div>

            <div class="setting-group">
              <label for="toc-position" class="setting-label">Position</label>
              <select id="toc-position" class="setting-input">
                <option value="left">Left Side</option>
                <option value="right">Right Side</option>
              </select>
              <p class="setting-description">Choose which side to display the table of contents</p>
            </div>
          </section>

          <!-- Diagrams Section -->
          <section id="diagrams" class="settings-section">
            <h2>Mermaid Diagrams</h2>

            <div class="setting-group">
              <label for="diagram-zoom" class="setting-label">Default Zoom (%)</label>
              <input type="number" id="diagram-zoom" class="setting-input" min="10" max="200" value="100" />
            </div>

            <div class="setting-group">
              <label class="setting-label">
                <input type="checkbox" id="diagram-animations" class="setting-checkbox" checked />
                Enable Animations
              </label>
            </div>

            <div class="setting-group">
              <label for="diagram-timeout" class="setting-label">Render Timeout (seconds)</label>
              <input type="number" id="diagram-timeout" class="setting-input" min="1" max="30" value="5" />
            </div>
          </section>

          <!-- Performance Section -->
          <section id="performance" class="settings-section">
            <h2>Performance</h2>

            <div class="setting-group">
              <label class="setting-label">
                <input type="checkbox" id="auto-reload" class="setting-checkbox" checked />
                Auto Reload on File Change
              </label>
            </div>

            <div class="setting-group">
              <label for="reload-debounce" class="setting-label">Reload Debounce (ms)</label>
              <input type="number" id="reload-debounce" class="setting-input" min="100" max="5000" step="100" value="300" />
            </div>

            <div class="setting-group">
              <label for="lazy-threshold" class="setting-label">Lazy Loading Threshold (KB)</label>
              <input type="number" id="lazy-threshold" class="setting-input" min="50" max="1000" step="50" value="500" />
            </div>
          </section>

          <!-- Export Section -->
          <section id="export" class="settings-section">
            <h2>Export</h2>

            <div class="setting-group">
              <label for="export-default-format" class="setting-label">Default Format</label>
              <select id="export-default-format" class="setting-input">
                <option value="docx">Word Document (.docx)</option>
                <option value="pdf">PDF / Print</option>
              </select>
              <p class="setting-description">Format to use when exporting documents</p>
            </div>

            <div class="setting-group">
              <label for="export-default-page-size" class="setting-label">Default Page Size</label>
              <select id="export-default-page-size" class="setting-input">
                <optgroup label="ISO A-Series">
                  <option value="A0">A0 (841 x 1189 mm)</option>
                  <option value="A1">A1 (594 x 841 mm)</option>
                  <option value="A3">A3 (297 x 420 mm)</option>
                  <option value="A4">A4 (210 x 297 mm)</option>
                  <option value="A5">A5 (148 x 210 mm)</option>
                  <option value="A6">A6 (105 x 148 mm)</option>
                </optgroup>
                <optgroup label="North American">
                  <option value="Letter">Letter (8.5 x 11 in)</option>
                  <option value="Legal">Legal (8.5 x 14 in)</option>
                  <option value="Tabloid">Tabloid (11 x 17 in)</option>
                  <option value="Executive">Executive (7.25 x 10.5 in)</option>
                </optgroup>
              </select>
              <p class="setting-description">Page size for exported documents</p>
            </div>

            <div class="setting-group">
              <label class="setting-label">
                <input type="checkbox" id="export-include-toc" class="setting-checkbox" checked />
                Include Table of Contents
              </label>
              <p class="setting-description">Add a table of contents at the beginning of exported documents</p>
            </div>

            <div class="setting-group">
              <label for="export-filename-template" class="setting-label">Filename Template</label>
              <input type="text" id="export-filename-template" class="setting-input" 
                     placeholder="{title}" value="{title}" />
              <p class="setting-description">
                Available variables: <code>{title}</code>, <code>{date}</code>, <code>{datetime}</code>, 
                <code>{year}</code>, <code>{month}</code>, <code>{day}</code>
              </p>
            </div>

            <div class="setting-group">
              <div class="filename-preview">
                <span class="preview-label">Preview:</span>
                <span id="filename-preview-text">document.docx</span>
              </div>
            </div>
          </section>

          <!-- Advanced Section -->
          <section id="advanced" class="settings-section">
            <h2>Advanced</h2>

            <div class="setting-group">
              <label class="setting-label">
                <input type="checkbox" id="sync-tabs" class="setting-checkbox" />
                Sync Settings Across Tabs
              </label>
            </div>

            <div class="setting-group">
              <label for="log-level" class="setting-label">Log Level</label>
              <select id="log-level" class="setting-input">
                <option value="none">None</option>
                <option value="error">Error</option>
                <option value="warn">Warn</option>
                <option value="info">Info</option>
                <option value="debug">Debug</option>
              </select>
              <p class="setting-description">Control verbosity of console logging</p>
            </div>

            <h3 style="margin-top: 32px; margin-bottom: 16px; font-size: 18px;">Site Blocklist</h3>

            <div class="setting-group">
              <p class="setting-description" style="margin-bottom: 12px;">
                Add sites where MDView should not render markdown. Useful for sites that have their own markdown rendering (like GitHub).
              </p>
              
              <div class="blocklist-input-row">
                <input type="text" id="blocklist-input" class="setting-input" 
                       placeholder="e.g., github.com or *.gitlab.com/*/blob/*" />
                <button id="btn-add-blocked-site" class="action-button">Add</button>
              </div>
              
              <div class="blocklist-patterns-help">
                <details>
                  <summary>Pattern examples</summary>
                  <ul class="pattern-examples">
                    <li><code>github.com</code> - Block entire domain</li>
                    <li><code>*.github.com</code> - Block all subdomains</li>
                    <li><code>github.com/*/blob/*</code> - Block specific paths</li>
                    <li><code>https://raw.githubusercontent.com/*</code> - Full URL pattern</li>
                  </ul>
                </details>
              </div>

              <div id="blocklist-container" class="blocklist-container">
                <!-- Blocked sites will be rendered here -->
              </div>
            </div>

            <div class="setting-group">
              <button id="btn-clear-cache" class="action-button">Clear Cache</button>
              <p class="setting-description">Clear all cached markdown and theme data</p>
              <div id="cache-stats" class="cache-stats-container">
                <div class="stat-item">
                  <span class="stat-label">Items:</span>
                  <span id="cache-size">0</span> / <span id="cache-max">50</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Memory:</span>
                  <span id="cache-memory">~0 KB</span>
                </div>
              </div>
            </div>

            <div class="setting-group">
              <button id="btn-reset-defaults" class="action-button danger">Reset to Defaults</button>
              <p class="setting-description">Reset all settings to their default values</p>
            </div>

            <div class="setting-group">
              <button id="btn-export-settings" class="action-button">Export Settings</button>
              <button id="btn-import-settings" class="action-button">Import Settings</button>
              <input type="file" id="import-file" accept=".json" style="display: none;" />
            </div>
          </section>
        </main>
      </div>

      <footer class="options-footer">
        <div class="footer-actions">
          <button id="btn-save" class="primary-button">Save Changes</button>
          <span id="save-status" class="save-status"></span>
        </div>
        <div class="footer-info">
          <p class="version" id="app-version">MDView v1.0.0</p>
          <p class="made-with-love">Made with ❤️ by James Ainslie</p>
        </div>
      </footer>
    </div>

    <script src="options.ts" type="module"></script>
  </body>
</html>

